{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '47115642-a97741713bebc955e7d8d0e17';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: perPage,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryContainer = document.querySelector('.gallery');\nlet lightbox = new SimpleLightbox('.gallery a');\n\nexport function renderImages(images) {\n  const markup = images\n    .map(\n      ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n        <div class=\"gallery__item\">\n          <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n          </a>\n          <div class=\"photo-info\">\n            <p><b>Likes:</b> ${likes}</p>\n            <p><b>Views:</b> ${views}</p>\n            <p><b>Comments:</b> ${comments}</p>\n            <p><b>Downloads:</b> ${downloads}</p>\n          </div>\n        </div>\n      `\n    )\n    .join('');\n\n  galleryContainer.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  galleryContainer.innerHTML = '';\n}\n\nexport function hideLoadMoreButton(button) {\n  button.classList.add('is-hidden');\n}\n\nexport function showLoadMoreButton(button) {\n  button.classList.remove('is-hidden');\n}\n\nexport function scrollPage() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 0.7,\n    behavior: 'smooth',\n  });\n}\n\n","import { fetchImages } from './js/pixabay-api.js';\nimport {\n  renderImages,\n  clearGallery,\n  hideLoadMoreButton,\n  showLoadMoreButton,\n  scrollPage,\n} from './js/render-functions.js';\nimport iziToast from 'izitoast'; \nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('#search-form');\nconst loadMoreButton = document.querySelector('#load-more-btn');\nconst loader = document.querySelector('#loader');\nlet query = '';\nlet page = 1;\nconst perPage = 15;\nlet totalHits = 0;\n\nform.addEventListener('submit', onFormSubmit);\nloadMoreButton.addEventListener('click', onLoadMore);\n\nfunction showLoader() {\n  loader.classList.remove('is-hidden');\n}\n\nfunction hideLoader() {\n  loader.classList.add('is-hidden');\n}\n\nasync function onFormSubmit(event) {\n  event.preventDefault();\n  query = event.currentTarget.elements.searchQuery.value.trim();\n  if (!query) return;\n\n  page = 1;\n  clearGallery();\n  hideLoadMoreButton(loadMoreButton);\n  showLoader();\n\n  try {\n    const { hits, totalHits: hitsCount } = await fetchImages(query, page, perPage);\n    totalHits = hitsCount;\n    if (hits.length === 0) {\n      iziToast.warning({\n        title: 'Warning',\n        message: 'No images found. Please try another query.',\n      });\n      return;\n    }\n\n    renderImages(hits);\n\n    if (page * perPage < totalHits) {\n      showLoadMoreButton(loadMoreButton);\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: error.message.includes('Network')\n        ? 'Network error! Please check your internet connection.'\n        : 'An unexpected error occurred. Please try again later.',\n    });\n    console.error('Error loading images:', error);\n  } finally {\n    hideLoader();\n  }\n}\n\nasync function onLoadMore() {\n  page += 1;\n  hideLoadMoreButton(loadMoreButton);\n  showLoader();\n\n  try {\n    const { hits } = await fetchImages(query, page, perPage);\n\n    renderImages(hits);\n\n    if (page * perPage >= totalHits) {\n      hideLoadMoreButton(loadMoreButton);\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    } else {\n      showLoadMoreButton(loadMoreButton);\n      scrollPage();\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'An error occurred while loading more images. Please try again later.',\n    });\n    console.error('Error loading more images:', error);\n  } finally {\n    hideLoader();\n  }\n}\n\n\n\n\n\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","axios","error","galleryContainer","lightbox","SimpleLightbox","renderImages","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","hideLoadMoreButton","button","showLoadMoreButton","scrollPage","cardHeight","form","loadMoreButton","loader","totalHits","onFormSubmit","onLoadMore","showLoader","hideLoader","event","hits","hitsCount","iziToast"],"mappings":"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"}