{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '47115642-a97741713bebc955e7d8d0e17';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: perPage,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryContainer = document.querySelector('.gallery');\nlet lightbox = new SimpleLightbox('.gallery a');\n\nexport function renderImages(images) {\n  const markup = images\n    .map(\n      ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n        <div class=\"gallery__item\">\n          <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n          </a>\n          <div class=\"photo-info\">\n            <p><b>Likes:</b> ${likes}</p>\n            <p><b>Views:</b> ${views}</p>\n            <p><b>Comments:</b> ${comments}</p>\n            <p><b>Downloads:</b> ${downloads}</p>\n          </div>\n        </div>\n      `\n    )\n    .join('');\n\n  galleryContainer.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  galleryContainer.innerHTML = '';\n}\n\nexport function hideLoadMoreButton(button) {\n  button.classList.add('is-hidden');\n}\n\nexport function showLoadMoreButton(button) {\n  button.classList.remove('is-hidden');\n}\n\nexport function scrollPage() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 0.7,\n    behavior: 'smooth',\n  });\n}\n\n","import { fetchImages } from './js/pixabay-api.js';\nimport {\n  renderImages,\n  clearGallery,\n  hideLoadMoreButton,\n  showLoadMoreButton,\n  scrollPage,\n} from './js/render-functions.js';\n\nconst form = document.querySelector('#search-form');\nconst loadMoreButton = document.querySelector('#load-more-btn');\nlet query = '';\nlet page = 1;\nconst perPage = 15;\nlet totalHits = 0;\n\nform.addEventListener('submit', onFormSubmit);\nloadMoreButton.addEventListener('click', onLoadMore);\n\nasync function onFormSubmit(event) {\n  event.preventDefault();\n  query = event.currentTarget.elements.searchQuery.value.trim();\n  if (!query) return;\n\n  page = 1;\n  clearGallery();\n  hideLoadMoreButton(loadMoreButton);\n\n  try {\n    const { hits, totalHits: hitsCount } = await fetchImages(query, page, perPage);\n    totalHits = hitsCount;\n    if (hits.length === 0) {\n      alert('No images found. Please try another query.');\n      return;\n    }\n\n    renderImages(hits);\n\n    if (page * perPage < totalHits) {\n      showLoadMoreButton(loadMoreButton);\n    }\n  } catch (error) {\n    console.error('Error loading images:', error);\n  }\n}\n\nasync function onLoadMore() {\n  page += 1;\n  hideLoadMoreButton(loadMoreButton);\n\n  try {\n    const { hits } = await fetchImages(query, page, perPage);\n    renderImages(hits);\n\n    if (page * perPage >= totalHits) {\n      hideLoadMoreButton(loadMoreButton);\n      alert(\"We're sorry, but you've reached the end of search results.\");\n    } else {\n      showLoadMoreButton(loadMoreButton);\n      scrollPage();\n    }\n  } catch (error) {\n    console.error('Error loading more images:', error);\n  }\n}\n\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","axios","error","galleryContainer","lightbox","SimpleLightbox","renderImages","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","hideLoadMoreButton","button","showLoadMoreButton","scrollPage","cardHeight","form","loadMoreButton","totalHits","onFormSubmit","onLoadMore","event","hits","hitsCount"],"mappings":"6vBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC/D,GAAI,CAYF,OAXiB,MAAMC,EAAM,IAAIL,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUC,CACX,CACP,CAAK,GACe,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACP,CACH,CCpBA,MAAMC,EAAmB,SAAS,cAAc,UAAU,EAC1D,IAAIC,EAAW,IAAIC,EAAe,YAAY,EAEvC,SAASC,EAAaC,EAAQ,CACnC,MAAMC,EAASD,EACZ,IACC,CAAC,CAAE,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAAO;AAAA;AAAA,qBAE/DL,CAAa;AAAA,wBACVD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,+BAGnBC,CAAK;AAAA,+BACLC,CAAK;AAAA,kCACFC,CAAQ;AAAA,mCACPC,CAAS;AAAA;AAAA;AAAA,OAIvC,EACA,KAAK,EAAE,EAEVZ,EAAiB,mBAAmB,YAAaK,CAAM,EACvDJ,EAAS,QAAO,CAClB,CAEO,SAASY,GAAe,CAC7Bb,EAAiB,UAAY,EAC/B,CAEO,SAASc,EAAmBC,EAAQ,CACzCA,EAAO,UAAU,IAAI,WAAW,CAClC,CAEO,SAASC,EAAmBD,EAAQ,CACzCA,EAAO,UAAU,OAAO,WAAW,CACrC,CAEO,SAASE,GAAa,CAC3B,KAAM,CAAE,OAAQC,CAAU,EAAK,SAC5B,cAAc,UAAU,EACxB,wBACH,OAAO,SAAS,CACd,IAAKA,EAAa,GAClB,SAAU,QACd,CAAG,CACH,CCxCA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAiB,SAAS,cAAc,gBAAgB,EAC9D,IAAIzB,EAAQ,GACRC,EAAO,EACX,MAAMC,EAAU,GAChB,IAAIwB,EAAY,EAEhBF,EAAK,iBAAiB,SAAUG,CAAY,EAC5CF,EAAe,iBAAiB,QAASG,CAAU,EAEnD,eAAeD,EAAaE,EAAO,CAGjC,GAFAA,EAAM,eAAc,EACpB7B,EAAQ6B,EAAM,cAAc,SAAS,YAAY,MAAM,OACnD,EAAC7B,EAEL,CAAAC,EAAO,EACPiB,IACAC,EAAmBM,CAAc,EAEjC,GAAI,CACF,KAAM,CAAE,KAAAK,EAAM,UAAWC,CAAW,EAAG,MAAMhC,EAAYC,EAAOC,EAAMC,CAAO,EAE7E,GADAwB,EAAYK,EACRD,EAAK,SAAW,EAAG,CACrB,MAAM,4CAA4C,EAClD,MACD,CAEDtB,EAAasB,CAAI,EAEb7B,EAAOC,EAAUwB,GACnBL,EAAmBI,CAAc,CAEpC,OAAQrB,EAAO,CACd,QAAQ,MAAM,wBAAyBA,CAAK,CAC7C,EACH,CAEA,eAAewB,GAAa,CAC1B3B,GAAQ,EACRkB,EAAmBM,CAAc,EAEjC,GAAI,CACF,KAAM,CAAE,KAAAK,CAAI,EAAK,MAAM/B,EAAYC,EAAOC,EAAMC,CAAO,EACvDM,EAAasB,CAAI,EAEb7B,EAAOC,GAAWwB,GACpBP,EAAmBM,CAAc,EACjC,MAAM,4DAA4D,IAElEJ,EAAmBI,CAAc,EACjCH,IAEH,OAAQlB,EAAO,CACd,QAAQ,MAAM,6BAA8BA,CAAK,CAClD,CACH"}